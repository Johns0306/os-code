Experiment 6
Write a multithreaded program that calculates the mean, median, and standard deviation
for a list of integers. This program should receive a series of integers on the command line
and will then create three separate worker threads. The first thread will determine the
mean value, the second will determine the median and the third will calculate the standard
deviation of the integers. The variables representing the mean, median, and standard
deviation values will be stored globally. The worker threads will set these values, and the
parent thread will output the values once the workers have exited.
Aim

To write a multithreaded program that calculates the mean, median, and standard deviation of a given list of integers using three worker threads.

Algorithm 

	1.	Start the program.
	2.	Read integers from the command line.
	3.	Store the numbers in a global array.
	4.	Create Thread 1 to calculate the mean.
	5.	Create Thread 2 to calculate the median.
	6.	Create Thread 3 to calculate the standard deviation.
	7.	Store mean, median, and standard deviation in global variables.
	8.	Parent thread waits until all worker threads finish.
	9.	Display the calculated values.
	10.	Stop the program.

Program 

#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <math.h>

/* Global variables */
int a[100], n;
double mean, median, sd;

/* Thread to calculate mean */
void* find_mean(void* arg) {
    int sum = 0;
    for (int i = 0; i < n; i++)
        sum += a[i];

    mean = (double)sum / n;
    pthread_exit(NULL);
}

/* Thread to calculate median */
void* find_median(void* arg) {
    int temp;

    /* Simple sorting */
    for (int i = 0; i < n - 1; i++) {
        for (int j = i + 1; j < n; j++) {
            if (a[i] > a[j]) {
                temp = a[i];
                a[i] = a[j];
                a[j] = temp;
            }
        }
    }

    if (n % 2 == 0)
        median = (a[n/2 - 1] + a[n/2]) / 2.0;
    else
        median = a[n/2];

    pthread_exit(NULL);
}

/* Thread to calculate standard deviation */
void* find_sd(void* arg) {
    double sum = 0;

    for (int i = 0; i < n; i++)
        sum += pow(a[i] - mean, 2);

    sd = sqrt(sum / n);
    pthread_exit(NULL);
}

int main(int argc, char* argv[]) {
    pthread_t t1, t2, t3;

    n = argc - 1;

    for (int i = 0; i < n; i++)
        a[i] = atoi(argv[i + 1]);

    pthread_create(&t1, NULL, find_mean, NULL);
    pthread_join(t1, NULL);

    pthread_create(&t2, NULL, find_median, NULL);
    pthread_create(&t3, NULL, find_sd, NULL);

    pthread_join(t2, NULL);
    pthread_join(t3, NULL);

    printf("Mean = %.2f\n", mean);
    printf("Median = %.2f\n", median);
    printf("Standard Deviation = %.2f\n", sd);

    return 0;
}



Compiling

stats.c
gcc stats.c -o stats -lpthread -lm

Output

Input: 10 20 30 40 50

Mean = 30.00
Median = 30.00
Standard Deviation = 14.14
